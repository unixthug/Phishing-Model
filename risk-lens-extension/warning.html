<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
body {
  font-family: system-ui;
  background: #0f172a;
  color: white;
  text-align: center;
  padding: 20px;
}

#card {
  background: #1e293b;
  border-radius: 12px;
  padding: 20px;
}

.danger { color: #ef4444; }
.sus { color: #facc15; }

button {
  margin-top: 10px;
  padding: 10px;
  width: 100%;
  border-radius: 6px;
  border: none;
  cursor: pointer;
}

#safeBtn {
  background: #22c55e;
}

#continueBtn {
  background: #334155;
}
</style>
</head>

<body>
  <div id="card">
    <h2 class="danger">⚠️ Potential Phishing Site</h2>

    <p id="summary"></p>

    <p id="score"></p>

    <ul id="reasons"></ul>

    <button id="safeBtn">Go Back to Safety</button>
    <button id="continueBtn">Continue Anyway (Not Recommended)</button>
  </div>

<script>
const params = new URLSearchParams(location.search);

const target = params.get("target");
const score = Number(params.get("score"));
const verdict = params.get("verdict");

document.getElementById("summary").textContent =
  verdict === "phishing"
    ? "This site shows strong signs of phishing."
    : "This site may be unsafe.";

document.getElementById("score").textContent =
  `Risk score: ${Math.round(score)}/100`;

document.getElementById("safeBtn").onclick = () => {
  history.back();
};

document.getElementById("continueBtn").onclick = () => {
  browser.runtime.sendMessage({
    type: "ALLOW_ONCE",
    url: target
  }).then(() => {
    location.href = target;
  });
};
</script>

</body>
</html>